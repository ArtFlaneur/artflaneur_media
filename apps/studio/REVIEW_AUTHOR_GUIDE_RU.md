# Руководство автора по публикации ревью в Sanity Studio

Это краткая инструкция для редакторов и авторов, которые создают материалы в документе типа `Review`. Следуйте шагам ниже, чтобы подготовить текст, заполнить обязательные поля и корректно отправить материал в публикацию.

## 1. Подготовка рабочей среды

1. Получите доступ в Sanity Studio (`apps/studio`) и авторизуйтесь через корпоративную учётную запись.
2. Убедитесь, что у вас уже заведены нужные сущности:
   - Автор (профиль в документе `Author`).
   - Галерея, выставка и художники (подтягиваются из Directus через скрипт синхронизации).
3. Если нужной галереи/выставки нет в списке, попросите команду выполнить `pnpm --filter @artflaneur/studio sync:directus galleries,exhibitions` и обновите Studio (Cmd/Ctrl+R).

## 2. Создание черновика

1. В левом меню нажмите «Create new» и выберите тип документа **Review**.
2. Введите рабочее название, чтобы сразу увидеть предварительный просмотр в списке документов.
3. По умолчанию документ сохраняется как Draft. Нажмите `Ctrl+S` / `Cmd+S`, чтобы зафиксировать первый черновик.

## 3. Заполнение вкладки Content

| Поле | Что указать | Подсказки |
| --- | --- | --- |
| **Title** | Короткий заголовок (до 100 символов) | Обязательное поле. Используйте ключевые слова выставки, города, галереи. |
| **Slug** | URL-хвост | Нажмите «Generate» после финализации заголовка. Не меняйте slug после публикации. |
| **Excerpt** | 1–3 предложения для превью | До 200 символов, без форматирования. |
| **Main Image / Cover Image** | Обложка и дополнительный кадр | Загрузите изображение, заполните `Alt` (описание сцены). Для Cover можно добавить подпись. |
| **Body** | Основной текст | Используйте блоковый редактор: заголовки, цитаты, изображения, pull quotes. |
| **Rating** | Оценка 1–5 | Необязательно, но влияет на визуал в ленте. Используйте десятичные значения (например, `4.5`). |

## 4. Вкладка Editorial

- **Status** – ваша внутренняя стадия: `In Review`, `Needs Revision`, `Approved`.
- **Publish Status** – фактическое состояние публикации: `Draft`, `Scheduled`, `Published`, `Unpublished`.
- **Published At** – дата/время, когда материал должен появиться в ленте (UTC). Заполните перед сдачей.
- **Scheduled Publish At** – если нужно заранее поставить в расписание.

Совет: держите `Status = Needs Revision`, пока редактор не проверит текст. После утверждения переключайте на `Approved` и обновляйте `Publish Status`.

## 5. Вкладка Metadata

1. **Author** – выберите себя из справочника. Если профиль не найден, создайте документ `Author` отдельно.
2. **Exhibition** – выберите соответствующую выставку. Если её нет, можно оставить пустой и заполнить **Gallery**.
3. **Gallery** – выбирайте галерею, где проходит событие. Минимально нужно выбрать либо Exhibition, либо Gallery.
4. **Artists** – добавьте всех задействованных художников. Можно выбирать несколько записей.
5. **Exhibition Dates** – укажите фактические даты показа.
6. **Venue** – адрес, часы работы, базовая информация о билетах (если есть).
7. **Related Reviews** – внутренние ссылки на другие релевантные тексты.
8. **CTA Text** – текст кнопки по умолчанию «Add to your Planner», меняйте только при необходимости.

## 6. Вкладка Sponsorship

Используйте только если материал оплачен партнёром.

1. **Sponsorship Enabled** – переключите на `Sponsored Content`.
2. **Sponsor** – выберите бренда из справочника `Sponsor`.
3. **Sponsorship Type / Badge Settings / Disclaimer** – настройте формат бейджа и текст дисклеймера. Для шаблонов с переменной `{logo}` обязательно добавьте логотип спонсора в документе `Sponsor`.

## 7. Финальная проверка и публикация

1. Откройте «Preview» (или нажмите `Ctrl+Alt+P`), чтобы увидеть страницу так, как она появится на сайте.
2. Пройдитесь по чек-листу:
   - Все обязательные поля подсвечены зелёными галочками.
   - Нет пустых ALT-текстов.
   - Статусы выставок и галерей выбраны корректно.
   - `Published At` соответствует желаемой дате.
3. Измените `Status` → `Approved`, `Publish Status` → `Published` или `Scheduled`.
4. Нажмите **Publish**. Если планируете публикацию в будущем, установите `Scheduled Publish At` и оставьте `Publish Status = Scheduled`.

## 8. Частые вопросы

- **Нужных сущностей нет в списке** – попросите команду данных синхронизировать Directus → Sanity или заведите временную карточку вручную.
- **Как найти галерею среди тысяч записей?** – начните вводить город или часть названия; Sanity фильтрует список по совпадениям.
- **Ошибка «Select either an Exhibition or a Gallery»** – заполните хотя бы одно из полей, иначе документ нельзя опубликовать.
- **Правки после публикации** – внесите изменения и нажмите `Publish` ещё раз; slug при этом не меняйте.

Следуя этим шагам, вы обеспечите единый стандарт качества текстов и ускорите работу редакции.
